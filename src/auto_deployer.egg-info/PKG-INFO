Metadata-Version: 2.4
Name: auto-deployer
Version: 0.1.0
Summary: CLI agent for automated deployments
Author: ctfy66
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: paramiko>=3.3
Requires-Dist: requests>=2.31
Requires-Dist: python-dotenv>=1.0

# Auto-Deployer

Auto-Deployer æ˜¯ä¸€ä¸ª LLM é©±åŠ¨çš„è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ã€‚åªéœ€æä¾› GitHub ä»“åº“ URL å’Œ SSH å‡­æ®ï¼Œå®ƒå°±èƒ½è‡ªä¸»å®Œæˆé¡¹ç›®çš„å…‹éš†ã€åˆ†æå’Œéƒ¨ç½²ã€‚

## å·¥ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœ¬åœ°é¢„åˆ†æ     â”‚ â”€â”€â–¶ â”‚   SSH è¿æ¥      â”‚ â”€â”€â–¶ â”‚   Agent éƒ¨ç½²    â”‚
â”‚  å…‹éš† + è¯»å–     â”‚     â”‚   è¿œç¨‹ä¸»æœºæ¢æµ‹   â”‚     â”‚  LLM è‡ªä¸»æ‰§è¡Œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

1. **æœ¬åœ°é¢„åˆ†æ**ï¼šå…‹éš†ä»“åº“åˆ°æœ¬åœ°ï¼Œè¯»å–å…³é”®æ–‡ä»¶ï¼ˆREADMEã€package.jsonã€requirements.txtã€Dockerfile ç­‰ï¼‰ï¼Œè¯†åˆ«é¡¹ç›®ç±»å‹å’Œæ¡†æ¶
2. **SSH è¿æ¥**ï¼šå»ºç«‹åˆ°ç›®æ ‡æœåŠ¡å™¨çš„ SSH ä¼šè¯ï¼Œæ”¶é›†ä¸»æœºä¿¡æ¯ï¼ˆæ“ä½œç³»ç»Ÿã€å†…æ ¸ç‰ˆæœ¬ç­‰ï¼‰
3. **Agent éƒ¨ç½²**ï¼šå°†åˆ†æç»“æœå‘é€ç»™ LLMï¼Œç”± LLM è‡ªä¸»å†³å®šæ‰§è¡Œä»€ä¹ˆå‘½ä»¤ï¼Œç›´åˆ°éƒ¨ç½²å®Œæˆæˆ–æ”¾å¼ƒ

## ç‰¹æ€§

- ğŸ¤– **å…¨è‡ªåŠ¨éƒ¨ç½²**ï¼šLLM Agent æ¨¡å¼ï¼Œæ— éœ€äººå·¥å¹²é¢„
- ğŸ“¦ **æ™ºèƒ½åˆ†æ**ï¼šè‡ªåŠ¨è¯†åˆ«é¡¹ç›®ç±»å‹ï¼ˆPython/Node.js/é™æ€ç½‘ç«™ç­‰ï¼‰å’Œæ¡†æ¶
- ğŸ”„ **è‡ªæˆ‘ä¿®å¤**ï¼šé‡åˆ°é”™è¯¯æ—¶ LLM ä¼šåˆ†ææ—¥å¿—å¹¶å°è¯•ä¿®å¤
- ğŸ“ **è¯¦ç»†æ—¥å¿—**ï¼šæ¯æ¬¡éƒ¨ç½²çš„å®Œæ•´å¯¹è¯è®°å½•ä¿å­˜ä¸º JSON æ–‡ä»¶
- ğŸ”§ **çµæ´»é…ç½®**ï¼šæ”¯æŒç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶

## è¦æ±‚

- Python 3.10+
- æ”¯æŒçš„ LLM æä¾›å•†ï¼šGeminiï¼ˆæ¨è gemini-2.5-flashï¼‰ã€OpenAI

## å®‰è£…

```bash
git clone https://github.com/ctfy66/Auto-Deployer.git
cd Auto-Deployer
pip install -e .
```

## å¿«é€Ÿå¼€å§‹

### 1. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆæˆ–ç›´æ¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼‰ï¼š

```bash
# LLM API å¯†é’¥
AUTO_DEPLOYER_GEMINI_API_KEY=your-gemini-api-key

# SSH ç›®æ ‡æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼Œä¹Ÿå¯é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šï¼‰
AUTO_DEPLOYER_SSH_HOST=192.168.1.100
AUTO_DEPLOYER_SSH_USERNAME=deploy
AUTO_DEPLOYER_SSH_PASSWORD=yourpassword

# ä»£ç†è®¾ç½®ï¼ˆå¯é€‰ï¼‰
HTTP_PROXY=http://127.0.0.1:7890
HTTPS_PROXY=http://127.0.0.1:7890
```

### 2. è¿è¡Œéƒ¨ç½²

```bash
auto-deployer deploy \
    --repo git@github.com:username/project.git \
    --host 192.168.1.100 \
    --user deploy \
    --auth-method password \
    --password yourpassword
```

### 3. æŸ¥çœ‹æ—¥å¿—

```bash
# åˆ—å‡ºæ‰€æœ‰éƒ¨ç½²æ—¥å¿—
auto-deployer logs --list

# æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡éƒ¨ç½²
auto-deployer logs

# æŸ¥çœ‹ç‰¹å®šæ—¥å¿—
auto-deployer logs --file deploy_project_20251202_120000.json
```

## é…ç½®

é…ç½®æ–‡ä»¶ä½äº `config/default_config.json`ï¼š

```json
{
  "llm": {
    "provider": "gemini",
    "model": "gemini-2.5-flash",
    "api_key": null,
    "endpoint": null,
    "temperature": 0.0
  },
  "deployment": {
    "workspace_root": ".auto-deployer/workspace",
    "default_host": null,
    "default_port": 22,
    "default_username": null,
    "default_auth_method": "password",
    "default_password": null,
    "default_key_path": null
  }
}
```

### LLM æä¾›å•†

| æä¾›å•†         | é…ç½®                   | ç¯å¢ƒå˜é‡                       |
| -------------- | ---------------------- | ------------------------------ |
| Geminiï¼ˆæ¨èï¼‰ | `"provider": "gemini"` | `AUTO_DEPLOYER_GEMINI_API_KEY` |
| OpenAI         | `"provider": "openai"` | `AUTO_DEPLOYER_OPENAI_API_KEY` |

æ¨èä½¿ç”¨ **gemini-2.5-flash**ï¼Œå®ƒåœ¨ç†è§£å¤æ‚é¡¹ç›®å’Œè‡ªæˆ‘ä¿®å¤æ–¹é¢è¡¨ç°æ›´å¥½ã€‚

### SSH è®¤è¯æ–¹å¼

- **å¯†ç è®¤è¯**ï¼š`--auth-method password --password yourpassword`
- **å¯†é’¥è®¤è¯**ï¼š`--auth-method key --key-path ~/.ssh/id_rsa`

## å‘½ä»¤è¡Œå‚æ•°

```
auto-deployer deploy [OPTIONS]

å¿…éœ€å‚æ•°ï¼š
  --repo        Git ä»“åº“ URLï¼ˆæ”¯æŒ SSH å’Œ HTTPSï¼‰
  --host        ç›®æ ‡æœåŠ¡å™¨åœ°å€
  --user        SSH ç”¨æˆ·å

å¯é€‰å‚æ•°ï¼š
  --port        SSH ç«¯å£ï¼ˆé»˜è®¤ 22ï¼‰
  --auth-method è®¤è¯æ–¹å¼ï¼špassword æˆ– key
  --password    SSH å¯†ç 
  --key-path    SSH ç§é’¥è·¯å¾„
  --config      è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„
  --workspace   æœ¬åœ°å·¥ä½œç›®å½•
```

## é¡¹ç›®ç»“æ„

```
src/auto_deployer/
â”œâ”€â”€ cli.py              # å‘½ä»¤è¡Œæ¥å£
â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”œâ”€â”€ workflow.py         # éƒ¨ç½²å·¥ä½œæµ
â”œâ”€â”€ analyzer/           # ä»“åº“åˆ†ææ¨¡å—
â”‚   â””â”€â”€ repo_analyzer.py
â”œâ”€â”€ llm/                # LLM æä¾›å•†
â”‚   â”œâ”€â”€ agent.py        # Agent æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ gemini.py
â”‚   â””â”€â”€ openai.py
â”œâ”€â”€ ssh/                # SSH ä¼šè¯ç®¡ç†
â”‚   â”œâ”€â”€ session.py
â”‚   â””â”€â”€ probe.py
â””â”€â”€ workspace/          # å·¥ä½œç©ºé—´ç®¡ç†
    â””â”€â”€ manager.py
```

## å¼€å‘

è¿è¡Œæµ‹è¯•ï¼š

```bash
python -m pytest tests/ -v
```

## å·²çŸ¥é™åˆ¶

- Agent æœ€å¤šæ‰§è¡Œ 20 æ¬¡è¿­ä»£ï¼Œè¶…è¿‡åä¼šæ”¾å¼ƒ
- ç›®å‰å‡è®¾ç›®æ ‡æœåŠ¡å™¨æ˜¯ Linux ç³»ç»Ÿ
- ä¸æ”¯æŒéœ€è¦äº¤äº’å¼è¾“å…¥çš„éƒ¨ç½²æµç¨‹

## License

MIT
